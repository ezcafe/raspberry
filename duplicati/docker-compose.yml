version: "2.1"
services:
  duplicati:
    image: linuxserver/duplicati
    container_name: duplicati
    environment:
      - PUID=1000 # this should match the ouput of `id -u admin` on the CLI
      - PGID=1000 # this should match the ouput of `id -g admin` on the CLI
      - TZ=${TZ} # Set the appropriate timezone
      - CLI_ARGS=--no-local-blocks=false --run-script-before=./before-backup.sh --run-script-after=./after-backup.sh
    volumes:
      - duplicati_data:/config #Duplicati Config Files, for consisency across re-deployments
      - /var/lib/docker/volumes:/docker_volumes:rw # docker volume ls => docker inspect volume name => volume location
      - <raspberry-location>:/docker_source:rw # cd raspberry => pwd => raspberry source location
    ports:
      - ${DUPLICATI_PORT}:8200
    restart: unless-stopped

volumes:
  duplicati_data: 