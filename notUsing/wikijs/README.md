# Wiki JS

## Authentik

Tutorial here: https://goauthentik.io/integrations/services/wiki-js/

### Create Provider

- Select `OAuth2/OpenID Provider`
- Name: `WikiJS`
- Authentication flow: default-authentication-flow (Welcome to authentik!)
- Authorization flow: default-provider-authorization-implicit-consent (Authorize Application)
- Client type: Confidential
- Client ID: <auto-generated>
- Client Secret: <auto-generated>
- Redirect URIs/Origins (RegEx): Go to wiki -> Administration -> Authentication -> Add strategy -> Generic OpenID Connect / OAuth2 -> scroll to bottom -> Callback URL / Redirect URI
- Signing Key: `authentik Self-signed Certificate`

### Create Application

- Name: `WikiJS`
- Slug: `wikijs`
- Group: `selfhosted`
- Provider: <select-created-miniflux-provider>
- Policy engine mode: any

### Create Group

- Go to Wiki -> Administration
- Settings -> Add group name
- Permissions -> Select permissions for this group

### Update Wiki JS Config

- Go to Wiki -> Administration -> Authentication -> Add strategy -> Generic OpenID Connect / OAuth2
- Name: `OpenID Connect`
- Client ID: Client ID from the authentik provider.
- Client Secret: Client Secret from the authentik provider.
- Authorization Endpoint URL: https://<your-auth-domain>/application/o/authorize/
- Token Endpoint URL: https://<your-auth-domain>/application/o/token/
- User Info Endpoint URL: https://<your-auth-domain>/application/o/userinfo/
- Issuer: https://<your-auth-domain>/application/o/wikijs/
- Logout URL: https://<your-auth-domain>/application/o/wikijs/end-session/
- Allow self-registration: Enabled
- Assign to group: The group to which new users logging in from authentik should be assigned.

## Github store

- Follow this tutorial https://docs.requarks.io/storage/git
- When running `ssh-keygen -t rsa -b 4096` command, use this path `wikijs_id_rsa`
